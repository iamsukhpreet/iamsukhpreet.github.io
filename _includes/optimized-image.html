{% comment %}
  Optimized image include with lazy loading and WebP support
  Usage: {% include optimized-image.html src="/path/to/image.jpg" alt="Description" %}
{% endcomment %}

<picture>
  <source 
    srcset="{{ include.src | replace: '.jpg', '.webp' | replace: '.png', '.webp' | absolute_url }}"
    type="image/webp"
  >
  <img 
    src="{{ include.src | absolute_url }}"
    alt="{{ include.alt | default: 'Image' }}"
    class="optimized-image"
    loading="lazy"
    width="{{ include.width | default: 'auto' }}"
    height="{{ include.height | default: 'auto' }}"
    {% if include.caption %}
    title="{{ include.caption }}"
    {% endif %}
  >
</picture>
